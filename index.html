
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>rabbit</title>
  <style>
  *{
    box-sizing: border-box;
  }
  body{
    margin: 0;
    padding: 0;
    height: 100vh;
    width: 100vw;
    overflow: hidden;

  }
 	 #main{
		display:flex;
		flex-flow:row wrap;
    
  	}
  
    .rabbit{
      background: url("rabbit.png") no-repeat center center;
      background-size: contain;
      height: 50px;
      width: 50px;
      
    }
  </style>  
 </head>
<body>
	<div id="main">
	</div>
	<script>
  	var mainBox = document.getElementById("main");
  	var rabitSize = 120; 
    var totalNumber = 0;
    window.addEventListener('resize', function(){
      update();
    });
    update();

    function update(){
      var rabbits=countRabbits(rabitSize);
      rabbits.number = rabbits.number - totalNumber;
      if (rabbits.number > 0){
        drawRabbits(rabbits);
        totalNumber += rabbits.number; 
        console.log(totalNumber);
      }
    }

    function drawRabbits(rabbits){
        for(var i=0; i<rabbits.number;i++){
        var div=document.createElement('div');
        mainBox.appendChild(div);
        div.classList.add("rabbit"); 
        div.style.width  = rabbits.size+'px'; 
        div.style.height = rabbits.size+'px';
        div.style.backgroundColor = "rgb(" + random255()+"," + random255()+"," + random255()+")";      
      }
}


function random255(){
  return Math.round(Math.random()*255)
}

function countRabbits(rabitSize){
  var winH = window.innerHeight;
  var winW = window.innerWidth;


console.log(rabitSize);
  var rabbitsInW = Math.round(winW/rabitSize);
  var rabitSize = winW/rabbitsInW;
  var rabbitsInH = Math.ceil(winH/rabitSize);



  return {size:rabitSize, number:rabbitsInW*rabbitsInH}
}


  </script>
</body>
</html>
